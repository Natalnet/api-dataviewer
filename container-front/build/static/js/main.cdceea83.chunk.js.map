{"version":3,"sources":["components/Store/Context.js","utils/storage.js","components/Store/Provider.jsx","utils/useStorage.js","utils/api.js","utils/spinner.svg","components/Routes/Private/Private.jsx","Pages/Home/index.jsx","Pages/Turmas/index.jsx","routes.js","styles/global.js","App.js","index.js"],"names":["StoreContext","createContext","token","setToken","storage","window","sessionStorage","Error","set","key","value","setItem","JSON","stringify","get","item","getItem","parse","e","remove","removeItem","Cookie","getJSON","StoreProvider","children","useState","state","setState","useCallback","newValue","undefined","useStorage","Context","Provider","api","axios","create","baseURL","RoutesPrivate","Component","component","rest","id_teacher","Cookies","loading","setLoading","useEffect","fetchData","a","headers","response","data","localStorage","location","href","render","src","spinnerImg","alt","style","width","App","props","graphs","setGraphs","id_class","useParams","user","console","log","Container","length","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","backgroundColor","palette","background","borderRadius","list","maxWidth","text","margin","textAlign","link","color","turmas","setTurmas","_id","map","turma","name_class","path","Turmas","Home","createGlobalStyle","ReactDOM","document","getElementById"],"mappings":"gMAOeA,EALMC,wBAAc,CACjCC,MAAO,KACPC,SAAU,e,iBCFNC,EAAU,GAIhB,IACE,IAAKC,OAAOC,eACV,MAAMC,MAAM,sBAMdH,EAAQI,IAAM,SAACC,EAAKC,GAAN,OAAgBJ,eAAeK,QAAQF,EAAKG,KAAKC,UAAUH,KACzEN,EAAQU,IAAM,SAACL,GACb,IAAMM,EAAOT,eAAeU,QAAQP,GACpC,IACE,OAAOG,KAAKK,MAAMF,GAClB,MAAOG,GACP,OAAO,OAIXd,EAAQe,OAAS,SAAAV,GAAG,OAAIH,eAAec,WAAWX,IAClD,MAAOS,GAEPd,EAAQI,IAAMa,IAAOb,IACrBJ,EAAQU,IAAMO,IAAOC,QACrBlB,EAAQe,OAASE,IAAOF,OAGXf,Q,WCZAmB,EAhBO,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACvB,ECFa,SAAoBf,GAEjC,MAA0BgB,oBAAS,kBAAMrB,EAAQU,IAAIL,MAArD,mBAAOiB,EAAP,KAAcC,EAAd,KAYA,MAAO,CAACD,EAVIE,uBAAY,SAAAC,GACtBzB,EAAQI,IAAIC,EAAKoB,GACjBF,EAASE,KACR,CAACpB,IAEWmB,uBAAY,WACzBxB,EAAQe,OAAOV,GACfkB,OAASG,KACR,CAACrB,KDVsBsB,CAAW,SAArC,mBAAO7B,EAAP,KAAcC,EAAd,KAEA,OACE,cAAC6B,EAAQC,SAAT,CACEvB,MAAO,CACLR,QACAC,YAHJ,SAMGqB,K,iDEJQU,E,OAJHC,EAAMC,OAAO,CACvBC,QAAS,0BCPI,MAA0B,oC,gBCM1B,SAASC,EAAT,GAA2D,IAAvBC,EAAsB,EAAjCC,UAAyBC,EAAQ,iBAEjEC,EAAaC,IAAQ7B,IAAI,cACzBZ,EAAQyC,IAAQ7B,IAAI,eAC1B,EAA8BW,oBAAS,GAAvC,mBAAOmB,EAAP,KAAgBC,EAAhB,KAEAC,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAS,uCAAG,8BAAAC,EAAA,+EAISd,EAAIpB,IAAJ,gBAAiB4B,GAAc,CACpDO,QAAS,CACP,cAAgB,UAAhB,OAA2B/C,MANjB,OAIRgD,EAJQ,QAWRC,EAAOD,EAASC,MAGlB,MAAYjD,EAEhB2C,GAAW,GAGXO,aAAazC,QAAQ,OAAQC,KAAKC,UAAUsC,IAnB9B,kDAsBd9C,OAAOgD,SAASC,KAAO,wBACvBT,GAAW,GAvBG,0DAAH,qDA4Bf,OACE,cAAC,IAAD,2BACMJ,GADN,IAGEc,OAAU,kBAAkB,IAAZX,EACZ,cAACL,EAAD,eAAeE,IACf,qBAAKe,IAAKC,EAAYC,IAAI,UAAUC,MAAO,CAAEC,MAAO,W,aCvC/C,SAASC,EAAIC,GAG1B,MAA4BrC,mBAAS,IAArC,mBAAOsC,EAAP,KAAeC,EAAf,KAGQC,EAAaC,cAAbD,SAEFlB,EAAS,uCAAG,8BAAAC,EAAA,6DAGVmB,EAAOvD,KAAKK,MAAMmC,aAAapC,QAAQ,SAH7B,SAMOkB,EAAIpB,IAAJ,iBAAkBmD,GAAY,CACnDhB,QAAS,CACP,cAAgB,UAAhB,OAA2BkB,EAAKjE,UARpB,OAMVgD,EANU,OAahBc,EAAUd,EAASC,MAEnBiB,QAAQC,IAAInB,EAASC,MAfL,2CAAH,qDAsBf,OAJAL,qBAAU,WACRC,MACA,IAGA,eAACuB,EAAA,EAAD,+DAC2CL,EAEvCF,EAAOQ,OAAS,EACd,qEACA,qD,aClCQC,aAAW,SAACC,GAAD,MAAY,CACvCC,MAAO,CACLC,UAAWF,EAAMG,QAAQ,IACzBC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZC,gBAAiBP,EAAMQ,QAAQC,WAAWR,MAC1CS,aAAc,MAEhBC,KAAM,CACJxB,MAAO,OACPyB,SAAU,KAEZC,KAAM,CACJC,OAAQd,EAAMG,QAAQ,EAAG,EAAG,GAC5BhB,MAAO,OACP4B,UAAW,UAEbC,KAAM,CACJC,MAAO,eAII,SAAS7B,EAAIC,GAE1B,MAA4BrC,mBAAS,IAArC,mBAAOkE,EAAP,KAAeC,EAAf,KAEA9C,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAS,uCAAG,8BAAAC,EAAA,6DAGVmB,EAAOvD,KAAKK,MAAMmC,aAAapC,QAAQ,SAH7B,SAMOkB,EAAIpB,IAAJ,kBAAmBqD,EAAK0B,KAAO,CACpD5C,QAAS,CACP,cAAgB,UAAhB,OAA2BkB,EAAKjE,UARpB,OAMVgD,EANU,OAahB0C,EAAU1C,EAASC,MAbH,2CAAH,qDAiBf,OACE,8BACE,eAACmB,EAAA,EAAD,2BAGIqB,EAAOpB,OAAS,EACdoB,EAAOG,KAAI,SAACC,GAAD,OAAW,4BAAoBA,EAAMC,YAAlBD,EAAMF,QAEpC,mDC1DG,SAAShC,IACpB,OACI,cAAC,IAAD,UACI,cAAC,EAAD,UACI,eAAC,IAAD,WAGI,cAACvB,EAAD,CAAe2D,KAAK,UAAUzD,UAAW0D,IACzC,cAAC5D,EAAD,CAAe2D,KAAK,aAAazD,UAAW2D,W,sBCjBjDC,cAAf,2eCcevC,MAXf,WACI,OACI,qCAEI,cAAC,EAAD,IAEA,cAAC,EAAD,QCLZwC,IAAS9C,OACP,cAAC,EAAD,IACA+C,SAASC,eAAe,W","file":"static/js/main.cdceea83.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nconst StoreContext = createContext({\r\n  token: null,\r\n  setToken: () => {},\r\n});\r\n\r\nexport default StoreContext;","import Cookie from 'js-cookie';\r\n\r\nconst storage = {};\r\n\r\n/*Caso do navegador não tiver sessionStorage\r\n  ele lança uma excessão */\r\ntry {\r\n  if (!window.sessionStorage) {\r\n    throw Error('no session storage');\r\n  }\r\n\r\n  /* Definindo o valor, e sua chave. No nosso caso é o token.\r\n     Guardando o token na sessão, caso o usuário feche o navegador\r\n     a sessão é encerrada. */\r\n  storage.set = (key, value) => sessionStorage.setItem(key, JSON.stringify(value));\r\n  storage.get = (key) => {\r\n    const item = sessionStorage.getItem(key);\r\n    try {\r\n      return JSON.parse(item);\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  };\r\n  //Para remover o item do navegador manualmente. Caso seja necessário.\r\n  storage.remove = key => sessionStorage.removeItem(key);\r\n} catch (e) {\r\n  //definindo utilizações de cookie\r\n  storage.set = Cookie.set;\r\n  storage.get = Cookie.getJSON;\r\n  storage.remove = Cookie.remove;\r\n}\r\n\r\nexport default storage;","import React from 'react';\r\nimport Context from './Context';\r\nimport useStorage from '../../utils/useStorage';\r\n\r\nconst StoreProvider = ({ children }) => {\r\n  const [token, setToken] = useStorage('token');\r\n\r\n  return (\r\n    <Context.Provider\r\n      value={{\r\n        token,\r\n        setToken,\r\n      }}\r\n    >\r\n      {children}\r\n    </Context.Provider>\r\n  )\r\n}\r\n\r\n\r\nexport default StoreProvider;","import { useCallback, useState } from 'react';\r\nimport storage from './storage';\r\n\r\nexport default function useStorage(key) {\r\n  //pegando a chave diretamente do storage\r\n  const [state, setState] = useState(() => storage.get(key));\r\n  //Guardando um valor no storage\r\n  const set = useCallback(newValue => {\r\n    storage.set(key, newValue);\r\n    setState(newValue);\r\n  }, [key]);\r\n  //removendo o valor guardado\r\n  const remove = useCallback(() => {\r\n    storage.remove(key);\r\n    setState(undefined);\r\n  }, [key]);\r\n\r\n  return [state, set, remove];\r\n}","import axios from 'axios';\r\n\r\n/* Buscando dados de uma api remota com o endereço fixo.\r\n   Axios é uma biblioteca que lida com aplicações rest-api no react\r\n   facilita nossa vida, uma vez que não necessitamos definir um cabeçalho\r\n   ou o corpo da requisição. */\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:3333\"\r\n});\r\n\r\nexport default api;","export default __webpack_public_path__ + \"static/media/spinner.61cda93d.svg\";","import React, { useEffect, useState } from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport api from '../../../utils/api';\r\nimport Cookies from \"js-cookie\";\r\nimport spinnerImg from '../../../utils/spinner.svg';\r\n\r\nexport default function RoutesPrivate({ component: Component, ...rest }) {\r\n\r\n  const id_teacher = Cookies.get(\"APINJS_UID\");\r\n  const token = Cookies.get(\"APINJS_AUTH\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [])\r\n\r\n  const fetchData = async () => {\r\n    \r\n    try {\r\n      // Abrir requisição\r\n      const response = await api.get(`users/${id_teacher}`, {\r\n        headers: {\r\n          \"Authorization\": `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      // Recuperar dados\r\n      const data = response.data;\r\n  \r\n      // Adicionar token na sessão\r\n      data[\"token\"] = token;\r\n  \r\n      setLoading(true);\r\n  \r\n      // Colocar na sessão\r\n      localStorage.setItem(\"user\", JSON.stringify(data));\r\n\r\n    } catch(e) {\r\n      window.location.href = \"http://localhost:3333\"\r\n      setLoading(false);\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      // Token e id_teacher válidos?\r\n      render = {() => loading === true\r\n        ? <Component {...rest} /> // usuário vê o componente\r\n        : <img src={spinnerImg} alt=\"Loading\" style={{ width: 250 }}></img> \r\n      }\r\n    />\r\n  )\r\n}","import {\r\n  Container\r\n} from \"@material-ui/core\"\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport {\r\n  useParams\r\n} from \"react-router-dom\"\r\nimport api from \"../../utils/api\";\r\n\r\n\r\nexport default function App(props) {\r\n\r\n  // Gráficos\r\n  const [graphs, setGraphs] = useState([])\r\n\r\n  // Recuperar o id da turma\r\n  const { id_class } = useParams();\r\n\r\n  const fetchData = async () => {\r\n\r\n    // Recuperar os dados da sessão\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    // Recuperar os gráficos dessa turma\r\n    const response = await api.get(`graphs/${id_class}`, {\r\n      headers: {\r\n        \"authorization\": `Bearer ${user.token}`\r\n      }\r\n    });\r\n\r\n    // Atualizar o estado\r\n    setGraphs(response.data);\r\n\r\n    console.log(response.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  },[])\r\n\r\n  return (\r\n    <Container>\r\n      Olá, você quer ver os gráficos da Turma {id_class}\r\n      {\r\n        graphs.length > 0\r\n        ? <p>Os dados podem ser vistos no console</p>\r\n        : <p>Nenhum gráfico</p>\r\n      }\r\n    </Container>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  makeStyles,\r\n  List,\r\n  ListItem,\r\n  Link,\r\n  Button\r\n} from '@material-ui/core'\r\nimport api from '../../utils/api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(20),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: '5%'\r\n  },\r\n  list: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n  },\r\n  text: {\r\n    margin: theme.spacing(4, 0, 2),\r\n    width: '100%',\r\n    textAlign: 'center'\r\n  },\r\n  link: {\r\n    color: '#495057',\r\n  }\r\n}));\r\n\r\nexport default function App(props) {\r\n\r\n  const [turmas, setTurmas] = useState([]);\r\n  \r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [])\r\n\r\n  const fetchData = async () => {\r\n\r\n    // Recuperar os dados da sessão    \r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    // Abrir umar requisição do axios para pegar as turmas do professor\r\n    const response = await api.get(`classes/${user._id}`, {\r\n      headers: {\r\n        \"authorization\": `Bearer ${user.token}`\r\n      }\r\n    });\r\n\r\n    // Mudar estado do componente\r\n    setTurmas(response.data);\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Container>\r\n        Minhas Turmas\r\n        {\r\n          turmas.length > 0 \r\n          ? turmas.map((turma) => <p key={turma._id}>{turma.name_class}</p>)\r\n          // Retorna 400 se não houver nenhuma turma\r\n          : <p>Nenhuma turma</p>\r\n        }\r\n      </Container>\r\n    </div >\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n} from 'react-router-dom';\r\nimport StoreProvider from './components/Store/Provider';\r\nimport RoutesPrivate from './components/Routes/Private/Private';\r\nimport Home from './Pages/Home';\r\nimport Turmas from './Pages/Turmas';\r\n\r\nexport default function App() {\r\n    return (\r\n        <Router>\r\n            <StoreProvider>\r\n                <Switch>\r\n                    {/*RoutesPrivate é uma rota que está verificando se o token de acesso está disponível.\r\n                       Caso não esteja, retorna para a rota de login. */}\r\n                    <RoutesPrivate path=\"/turmas\" component={Turmas} />\r\n                    <RoutesPrivate path=\"/:id_class\" component={Home} />\r\n                </Switch>\r\n            </StoreProvider>\r\n        </Router>\r\n    );\r\n}\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nexport default createGlobalStyle`\r\n    *{\r\n        margin: 0;\r\n        padding: 0;\r\n        outline: 0;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    html, body, #root {\r\n        min-height: 100%;\r\n    }\r\n\r\n    body {\r\n        background: #F5F7FB;\r\n        -webkit-font-smoothing: antialiased !important;\r\n    }\r\n\r\n    body, input, button {\r\n        color: #222;\r\n        font-size: 14px;\r\n        font-family: Arial, Helvetica, sans-serif\r\n    }\r\n\r\n    button {\r\n        cursor: pointer;\r\n    }\r\n`;\r\n","//importações necessárias\r\nimport React from 'react';\r\nimport Routes from './routes';\r\nimport GlobalStyle from './styles/global';\r\n\r\nfunction App() {\r\n    return (\r\n        <>\r\n        {/*Adicionando todas as rotas disponíveis na árvore*/}\r\n            <Routes />\r\n        {/*Adicionando um estilo padrão para todas as telas*/}\r\n            <GlobalStyle />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n//Árvore de renderização. Pegando o componente app e colocando na div html com id root\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}